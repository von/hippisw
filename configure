#!/bin/sh
#set -x
###########################################################################
#
#	hippisw makefile configuration script
#
#	Generates appropriate make.hippisw.inc
#
#	$Id: configure,v 1.1 1995/05/06 22:34:01 vwelch Exp $
#
###########################################################################

make_inc="make.hippisw.inc"
obj_dir="obj"

if [ $# -ge 1 ]; then
	arch=$1
	shift

else
	os_name=`uname`
	os_version=`uname -r`

	# Seperate Solaris from SunOS
	if [ $os_name = "SunOS" ]; then
		case $os_version in
		5.*)	os_name="Solaris"
			;;
	esac
	fi
fi

#	Create make.hippisw.inc

echo "Making $make_inc"

rm -f $make_inc
echo "# Makefile definitions automatically generated by configure" >> $make_inc
echo "ARCH=$os_name" >> $make_inc
echo "ARCH_DIR=./$os_name" >> $make_inc
echo "CC=gcc" >> $make_inc

case $os_name in

Solaris)
	echo "ARCH_LD_FLAGS=-lnsl -lsocket -lucb" >> $make_inc
	;;

IRIX)
	echo "SHELL=/bin/sh" >> $make_inc
	;;

SunOS)
	;;

*)
	echo Warning: hippisw has not been tested on this OS.
esac

echo "INSTALL=cp" >> $make_inc
echo "MKDIR=mkdir -p" >> $make_inc
echo "STRIP=strip" >> $make_inc

#	Include definitions
cat make.defs >> $make_inc

#	If the file make.localdefs exists then include that.

if [ -r make.localdefs ]; then
	cat make.localdefs >> $make_inc
fi


